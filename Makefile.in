# Makefile for GeoStats
# GeoStats CVS Identification
# $Id: Makefile.in,v 1.4 2000/06/10 08:48:53 fishwaldo Exp $
# makefile originally created by Andy Church.
 
CC=@CC@
CFLAGS=@CFLAGS@
LDFLAGS= -rdynamic -ldl

TEST = @IRCD_FILES@

OBJS =	dotconf.o services.o main.o sock.o conf.o ircd.o timer.o users.o \
		ns_help.o dl.o dll_main.o chans.o servers.o
SRCS =	dotconf.c services.c main.c sock.c conf.c ircd.c timer.c users.c \
		ns_help.c dl.c dll_main.c chans.c servers.c

.c.o:
	$(CC) $(CFLAGS) -c $<


all: 	stats
	(cd dl; $(MAKE) $@)

clean:
	/bin/rm -rf *.o stats *.cache Makefile config.status config.h
	(cd dl; $(MAKE) $@)


stats: $(OBJS)
	$(CC) $(LDFLAGS) $(OBJS)  -o $@

# Catch any changes in compilation options at the top of this file
$(OBJS): Makefile

dotconf.o:	dotconf.c	stats.h		config.h	dotconf.h
services.o:	services.c	stats.h		config.h	dl.h		Unreal.h
main.o:		main.c		stats.h 	config.h	dl.h
sock.o:		sock.c		stats.h		config.h	dl.h
conf.o:		conf.c		stats.h		config.h	dotconf.h	dl.h
ircd.o:		ircd.c		stats.h		config.h	dl.h		
timer.o:	timer.c		stats.h		config.h	dl.h
users.o:	users.c		stats.h		config.h
ns_help.o:	ns_help.c	stats.h		config.h
dl.o:		dl.c		stats.h		config.h	dl.h
dll_main.o:	dll_main.c	dll_main.h	config.h
chans.o:	chans.c		stats.h		config.h
servers.o:	servers.c	stats.h		config.h	