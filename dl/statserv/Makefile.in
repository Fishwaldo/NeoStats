INCLUDES = -I../..

SOURCES= statserv.c
OBJECTS= statserv.lo
TARGET= statserv.so

CC=@CC@
CFLAGS=@CFLAGS@ -fPIC
LINKER=ld

$(warning *** NOTE:)
$(warning If you receive a "`../statserv.so': Permission denied" message, UNLOAD the module)
$(warning from NeoStats and then compile the module & the 'make' will function properly)
$(warning )

all:
	$(CC) $(CFLAGS) $(INCLUDES) -o $(OBJECTS) -c $(SOURCES)
	$(LINKER) -shared -o $(TARGET) $(LIBS) $(OBJECTS)
	/bin/cp $(TARGET) ../

clean:
	/bin/rm -rf ../$(TARGET) Makefile
	/bin/rm -rf *.o *.lo *.so
